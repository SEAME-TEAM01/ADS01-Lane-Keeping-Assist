import cv2
import numpy as np

def draw_lanes_on_image(dataset):
    image_path  = dataset["image_name"]
    lanes_x     = dataset["lanes_x"]
    lane_y      = dataset["lane_y"]

    image_org   = cv2.imread(image_path)
    image_new   = np.zeros((720, 1280, 3), dtype=np.uint8)


    for i in range(0, len(lane_y)):
        y   = lane_y[i]
        for j in range(0, len(lanes_x)):
            x = lanes_x[j][i]
            if x != -2:
                cv2.circle(image_org, (x, y), radius=3, color=(0, 0, 0), thickness=-1)
                cv2.circle(image_new, (x, y), radius=3, color=(255, 255, 255), thickness=-1)

    cv2.imwrite('lanepoints_on_original_image.jpg', image_org)
    cv2.imwrite('lanepoints_on_black_paint.jpg', image_new)

    cv2.imshow('Lanes', image_org)
    cv2.imshow('Lanes', image_new)
    cv2.waitKey(0)
    cv2.destroyAllWindows()

# main
dataset = {
    "lanes_x": [
        [-2, -2, -2, -2, 339, -2, 286, 174, 240, 335, 370, 384, 387, 384, 380, 375, 371, 366, 362, 358, 353, 349, 345, 340, 335, 330, 324, 318, 311, 305, 298, 292, 285, 277, 270, 263, 256, 248, 241, 233, 225, 217, 209, 201, 193, 184, 176, 168, 160, 152, 144, 136, 128, 120, 111, 103],
        [-2, -2, -2, -2, 371, -2, -2, 231, 381, 456, 499, 524, 541, 555, 568, 583, 595, 609, 622, 635, 649, 662, 674, 686, 698, 709, 720, 731, 741, 751, 761, 771, 781, 791, 800, 809, 818, 827, 836, 845, 854, 864, 873, 882, 891, 900, 909, 918, 928, 937, 946, 955, 964, 973, 982, 992],
        [-2, -2, -2, -2, -2, 305, 248, -2, -2, 196, 234, 239, 230, 213, 191, 169, 147, 125, 103, 79, 57, 36, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2],
        [-2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2]
    ],
    "lane_y": [160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 270, 280, 290, 300, 310, 320, 330, 340, 350, 360, 370, 380, 390, 400, 410, 420, 430, 440, 450, 460, 470, 480, 490, 500, 510, 520, 530, 540, 550, 560, 570, 580, 590, 600, 610, 620, 630, 640, 650, 660, 670, 680, 690, 700, 710],
    "image_name": "../data/images/Town07_Opt/0007.jpg"
}
draw_lanes_on_image(dataset)
